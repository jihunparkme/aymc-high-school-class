# 프로젝트 요구사항 명세서

## 프로젝트명
고등부 학생 관리 시스템

---

## ✅ 요구사항 1: 기본 화면 구조 및 학년/반/학생 선택

### 화면 흐름
```
[고등부 메인 화면]
   ↓
[학년 선택] (1학년, 2학년, 3학년)
   ↓
[반 목록] (반 이름 + 담임선생님 이름)
   ↓
[학생 목록]
```

### 상세 요구사항

#### 1-1. 메인 화면
- [x] 페이지 제목: "고등부"
- [x] 학년 선택 UI: 1학년, 2학년, 3학년 카드형 버튼
- [x] 교사 목록 버튼: 전체 교사 목록 조회
- [x] 관리자 모드 버튼: 관리자 패널 진입
- [x] 디자인: Apple 스타일의 세련된 그라데이션 배경 및 카드 UI

#### 1-2. 반 목록 화면
- [x] 선택한 학년의 모든 반 표시
- [x] 각 반마다 반 이름, 담임선생님 이름, 학생 수 표시
- [x] 상단 네비게이션: 뒤로가기, 홈 버튼 (양 끝 배치)

#### 1-3. 학생 목록 화면
- [x] 선택한 반의 모든 학생 표시
- [x] 각 학생 정보 표시: 학생 이름, 성별 이모지
- [x] 상단 네비게이션: 브레드크럼, 뒤로가기, 홈 버튼

---

## ✅ 요구사항 2: 학생 및 교사 관리 기능

### 학생 목록 화면 추가 기능

#### 2-1. 화면 상단 정보 및 날짜 네비게이션
- [x] 현재 표시 중인 주간 날짜 표시 (예: "2026년 02월 2주차")
- [x] **날짜 이동 기능**:
  - [x] "이전 주" 버튼
  - [x] "이번 주차로 이동" 버튼
  - [x] "다음 주" 버튼

#### 2-2. 학생별 정보 및 버튼
- [x] 각 학생마다 다음 요소 표시:
  - 학생 이름 및 성별 (👦/👧)
  - 출석 여부 버튼 (클릭으로 토글)
  - "기도제목" 버튼
  - "특이사항" 버튼
- [x] 기도제목/특이사항/출석 입력 여부 시각적 표시

#### 2-3. 교사 목록 화면
- [x] 전체 교사 목록 표시
- [x] 교사별 출석, 기도제목, 특이사항 관리 기능 (학생 관리와 동일한 UI/UX)

#### 2-4. 날짜별 데이터 관리
- [x] **데이터 구조**: Supabase DB를 통해 주차별(`week_id`) 데이터 관리
- [x] **저장 방식**: 변경 즉시 DB에 반영 (낙관적 UI 업데이트 적용)

#### 2-5. 기도제목/특이사항 입력 모달
- [x] 버튼 클릭 시 텍스트 입력 모달 팝업
- [x] 저장 시 해당 주차의 데이터로 DB에 저장

---

## ✅ 요구사항 3: 관리자 기능

### 관리자 접근
- [x] 메인 화면 하단에서 관리자 모드 진입 버튼

### 관리자 메뉴 구성

#### 3-1. 출결 관리
- [x] 주차별로 전체 학생 및 교사의 출결 현황 조회
- [x] 학년별, 반별, 교사별 필터링 기능
- [x] 출석/결석 인원 수 및 명단 표시 (성별 포함)

#### 3-2. 기도제목 조회
- [x] 전체 학생 및 교사의 주간 기도제목 조회
- [x] 검색 기능 (이름, 반명, 내용)
- [x] 성별 및 출석 여부 표시
- [x] 교사 기도제목 상단 고정 및 시각적 구분

#### 3-3. 특이사항 조회
- [x] 전체 학생 및 교사의 주간 특이사항 조회
- [x] 검색 기능
- [x] 성별 및 출석 여부 표시
- [x] 교사 특이사항 상단 고정 및 시각적 구분

#### 3-4. 반 관리
- [x] 학년별 반 목록 조회
- [x] 반 추가 기능
- [x] 반 수정/삭제 기능
- [x] 담임 교사 배정 및 해제 기능

#### 3-5. 교사 관리
- [x] 전체 교사 목록 조회
- [x] 교사 추가 기능
- [x] 교사 수정/삭제 기능
- [x] 담당 반 정보 표시

#### 3-6. 학생 관리
- [x] 반별 학생 목록 조회
- [x] 학생 추가 기능 (성별 선택 포함)
- [x] 학생 수정/삭제 기능

#### 3-7. 데이터 관리
- [x] **데이터 통계**:
  - [x] 전체 반, 학생, 교사 수 요약 표시
  - [x] 연간 월별 출결 현황 그래프 (Line Chart) 제공
  - [x] 월별 상세 출결 집계 테이블 제공 (주차별 재적/출석/결석/출석률)
  - [x] 학년별 및 전체 학년 필터링 기능
- [x] JSON 파일로 데이터 내보내기/가져오기 (백업용)

---

## ✅ 요구사항 4: 시스템 아키텍처 및 데이터베이스

### 4-1. 기술 스택
- **Frontend**: React, Vite
- **Backend**: Supabase (PostgreSQL)
- **State Management**: React useState + Supabase Realtime (via API calls)

### 4-2. 데이터베이스 스키마 (Supabase)

#### `grades`
- `id` (SERIAL PK): 학년 ID
- `name` (VARCHAR): 학년 이름

#### `classes`
- `id` (SERIAL PK): 반 ID
- `grade_id` (INTEGER FK): 학년 참조
- `name` (VARCHAR): 반 이름

#### `teachers`
- `id` (SERIAL PK): 교사 ID
- `name` (VARCHAR): 교사 이름
- `gender` (VARCHAR): 성별 ('남', '여')

#### `class_teachers`
- `class_id` (INTEGER FK): 반 참조
- `teacher_id` (INTEGER FK): 교사 참조
- PK: `(class_id, teacher_id)`

#### `students`
- `id` (SERIAL PK): 학생 ID
- `class_id` (INTEGER FK): 반 참조
- `name` (VARCHAR): 학생 이름
- `gender` (VARCHAR): 성별 ('남', '여')

#### `weekly_records`
- `id` (BIGSERIAL PK): 기록 ID
- `student_id` (INTEGER FK): 학생 참조
- `week_id` (VARCHAR): 주차 식별자 (예: '2026년 02월 2주차')
- `attendance` (BOOLEAN): 출석 여부
- `notes` (TEXT): 특이사항
- `prayer_requests` (TEXT): 기도제목 (줄바꿈으로 구분)
- Unique Constraint: `(student_id, week_id)`

#### `teacher_weekly_records`
- `id` (BIGSERIAL PK): 기록 ID
- `teacher_id` (INTEGER FK): 교사 참조
- `week_id` (VARCHAR): 주차 식별자
- `attendance` (BOOLEAN): 출석 여부
- `notes` (TEXT): 특이사항
- `prayer_requests` (TEXT): 기도제목
- Unique Constraint: `(teacher_id, week_id)`

---

## ✅ 요구사항 5: 디자인 및 UI/UX

### 5-1. 디자인 컨셉
- **Apple Style**: 미니멀리즘, 부드러운 곡선, 은은한 그림자, 블러 효과
- **Color Palette**: White/Gray 배경, Blue 포인트 컬러 (`#0071E3`)

### 5-2. 주요 UI 요소
- **헤더**: 뒤로가기/홈 버튼 양 끝 배치, 브레드크럼 네비게이션
- **카드**: 둥근 모서리, 호버 시 떠오름 효과(Elevation)
- **입력 폼**: iOS 스타일의 깔끔한 입력 필드 및 세그먼트 컨트롤
- **반응형**: 모바일 환경을 고려한 유동적 레이아웃 및 가로 스크롤 탭
- **차트**: SVG 기반의 인터랙티브 라인 차트 (데이터 포인트 터치 지원)

### 5-3. 편의 기능
- **맨 위로 이동**: 스크롤 시 우측 하단에 Top 버튼 표시
- **브라우저 히스토리**: 뒤로가기 버튼 지원 (History API 연동)

# 프로젝트 요구사항 명세서

## 프로젝트명
고등부 학생 관리 시스템

---

## ✅ 요구사항 1: 기본 화면 구조 및 학년/반/학생 선택

### 화면 흐름
```
[고등부 메인 화면]
   ↓
[학년 선택] (1학년, 2학년, 3학년)
   ↓
[반 목록] (반 이름 + 담임선생님 이름)
   ↓
[학생 목록]
```

### 상세 요구사항

#### 1-1. 메인 화면
- [ ] 페이지 제목: "고등부"
- [ ] 학년 선택 UI: 1학년, 2학년, 3학년 버튼/리스트
- [ ] 선택된 학년 시각적 표시 (하이라이트)

#### 1-2. 반 목록 화면
- [ ] 선택한 학년의 모든 반 표시
- [ ] 각 반마다 다음 정보 표시:
  - 반 이름 (예: 1-1, 1-2, ...)
  - 담임선생님 이름
- [ ] 선택된 반 시각적 표시 (하이라이트)
- [ ] 뒤로가기 버튼 (학년 선택 화면으로)

#### 1-3. 학생 목록 화면
- [ ] 선택한 반의 모든 학생 표시
- [ ] 각 학생 정보 표시: 학생 이름
- [ ] 뒤로가기 버튼 (반 목록 화면으로)

---

## ✅ 요구사항 2: 학생 관리 기능

### 학생 목록 화면 추가 기능

#### 2-1. 화면 상단 정보 및 날짜 네비게이션
- [ ] 현재 표시 중인 주간 날짜 표시 (예: "2월 2일 (일) ~ 2월 8일 (토)")
- [ ] 현재 날짜 강조 표시
- [ ] 선택된 반 정보 표시 (학년, 반, 담임선생님 이름)
- [ ] **날짜 이동 기능**:
  - [ ] "이전 주" 버튼 (일요일 기준으로 한 주 뒤로)
  - [ ] "오늘" 버튼 (현재 날짜의 주간으로 이동)
  - [ ] "다음 주" 버튼 (일요일 기준으로 한 주 앞으로)
  - [ ] 주간 내 각 날짜 클릭으로 직접 이동 가능 (선택사항)

#### 2-2. 학생별 정보 및 버튼
- [ ] 각 학생마다 다음 요소 표시:
  - 학생 이름
  - 출석 여부 (클릭 가능 버튼으로 관리, 기도제목/특이사항처럼 동일하게 처리)
  - "기도제목" 버튼
  - "특이사항" 버튼
- [ ] 기도제목/특이사항/출석 입력 여부 시각적 표시 (예: 버튼 색상 변경, 체크마크 등)

#### 2-3. 날짜별 데이터 관리
- [ ] **데이터 구조**: 각 학생의 기도제목, 특이사항, 출석 정보를 **날짜 기준으로 저장**
  ```javascript
  // 예시 구조
  student: {
    studentId: "1-1-1",
    name: "이준호",
    dailyData: {
      "2026-02-05": {
        prayerRequests: ["시험 잘 보기", "건강"],
        notes: "최근 감기 있었음",
        attendance: true
      },
      "2026-02-06": {
        prayerRequests: [],
        notes: "",
        attendance: false
      }
    }
  }
  ```

#### 2-4. 날짜 이동 시 동작
- [ ] 날짜를 이동하면 해당 날짜에 입력된 기도제목, 특이사항, 출석 정보 표시
- [ ] 해당 날짜에 입력된 내용이 없으면 빈 상태로 표시
- [ ] 과거 날짜도 조회 가능 (이전 주로 계속 이동 가능)
- [ ] 미래 날짜도 사전에 입력 가능 (계획 및 기도제목 미리 등록 가능)

#### 2-5. 실시간 저장 기능
- [ ] 기도제목, 특이사항, 출석 정보 **입력 후 저장 시 즉시 메모리에 반영**
- [ ] 메모리 업데이트 후 **즉시 LocalStorage에도 저장**
- [ ] 사용자가 다른 학생으로 넘어가거나 날짜를 변경해도 저장된 데이터 유지
- [ ] 같은 학생의 다른 날짜 정보는 독립적으로 관리 (한 날짜의 변경이 다른 날짜에 영향 없음)

#### 2-6. 출석 여부 관리
- [ ] 출석 버튼을 클릭하면 "기도제목/특이사항" 입력 모달처럼 처리
- [ ] 간단한 확인/취소 팝업으로 출석 상태 변경 (O/X 또는 예/아니오)
- [ ] 체크 상태 변경 시 로컬스토리지에 즉시 저장
- [ ] 페이지 새로고침 후에도 해당 날짜의 출석 상태 유지

#### 2-7. 기도제목/특이사항 입력 모달
- [ ] 버튼 클릭 시 텍스트 입력 모달 팝업
- [ ] 모달 창에 다음 요소 포함:
  - 학생 이름 및 현재 날짜 표시
  - 텍스트 입력 영역 (여러 줄 입력 가능)
  - "저장" 버튼
  - "취소" 버튼
- [ ] 저장 시 해당 **날짜의 데이터**로 저장
- [ ] 이미 저장된 내용이 있으면 입력 영역에 표시
- [ ] 저장 직후 메모리 반영 및 LocalStorage 자동 저장

---

## ✅ 요구사항 3: 관리자 기능

### 관리자 접근
- [ ] 메인 화면에서 관리자 모드 진입 버튼 (예: ⚙️ 아이콘)
- [ ] 관리자 메뉴 페이지로 이동

### 관리자 메뉴 구성

#### 3-1. 기도제목 조회
- [ ] 전체 학생의 기도제목을 한눈에 볼 수 있는 페이지
- [ ] 다음 정보 표시:
  - 학년 / 반 / 학생 이름 / 기도제목
- [ ] 기도제목이 없는 학생은 "입력 필요" 표시
- [ ] 검색 기능 (학생명, 반명 검색 가능)

#### 3-2. 특이사항 조회
- [ ] 전체 학생의 특이사항을 한눈에 볼 수 있는 페이지
- [ ] 다음 정보 표시:
  - 학년 / 반 / 학생 이름 / 특이사항
- [ ] 특이사항이 없는 학생은 "입력 필요" 표시
- [ ] 검색 기능 (학생명, 반명 검색 가능)

#### 3-3. 반 관리
- [ ] 반 목록 조회
- [ ] 반 추가 기능:
  - 학년 선택
  - 반 이름 입력
  - 담임선생님 이름 입력
- [ ] 반 수정 기능:
  - 반 이름 수정
  - 담임선생님 이름 수정
- [ ] 반 삭제 기능

#### 3-4. 학생 관리
- [ ] 각 반별 학생 목록 조회
- [ ] 학생 추가 기능:
  - 반 선택
  - 학생 이름 입력
- [ ] 학생 수정 기능:
  - 학생 이름 수정
- [ ] 학생 삭제 기능

#### 3-5. 관리자 메뉴 네비게이션
- [ ] 탭 또는 사이드 메뉴로 3-1, 3-2, 3-3, 3-4 전환
- [ ] 일반 모드로 돌아가기 버튼

---

## ✅ 요구사항 4: 프론트엔드 데이터 관리 시스템

### 개요
- [ ] 기본: React State에서 메모리로 데이터 관리
- [ ] 자동 백업: 1시간 단위로 메모리 데이터를 LocalStorage/IndexedDB에 저장
- [ ] 페이지 새로고침 시: 저장된 데이터를 로드
- [ ] 자정(00:00): 새로운 날짜로 초기화
- [ ] 관리자: 데이터 수동 다운로드/업로드 기능

### 4-1. 자동 백업 (1시간 단위)
- [ ] 타이머 설정: 매 1시간마다 자동 실행
- [ ] 저장 대상: 브라우저 LocalStorage (또는 IndexedDB)
- [ ] 저장 데이터: 현재 메모리의 모든 데이터
- [ ] 저장 실패 시 에러 콘솔 로깅

### 4-2. 페이지 새로고침/재접속 시 데이터 로드
- [ ] 페이지 로드 시 LocalStorage에서 데이터 확인
- [ ] 데이터 존재 시: 메모리에 복원
- [ ] 데이터 미존재 시: 초기 데이터 사용

### 4-3. 자정(00:00) 처리
- [ ] 자정 도달 감지 (타이머 또는 페이지 포커스 시)
- [ ] 현재 데이터를 백업 파일로 저장
- [ ] 새로운 날짜의 초기 데이터로 초기화
- [ ] 사용자에게 알림 (선택사항)

### 4-4. 관리자 데이터 관리
- [ ] 데이터 다운로드 기능:
  - 현재 메모리의 모든 데이터를 JSON 파일로 다운로드
  - 파일명: `school_data_YYYY-MM-DD.json`
- [ ] 데이터 업로드 기능:
  - JSON 파일을 선택하여 업로드
  - 유효성 검증 후 메모리에 로드
  - 로컬스토리지에도 즉시 저장
- [ ] 백업 관리:
  - 이전 날짜의 백업 데이터 조회 (로컬스토리지에서)
  - 백업 복원 기능

### 4-5. 데이터 저장소 구조 (LocalStorage)

**변경된 데이터 구조** - 날짜별 저장:

```javascript
// 현재 데이터 (메모리와 동기화)
localStorage.setItem('schoolData_current', JSON.stringify({
  date: "2026-02-06",
  grades: [...]
}))

// 학생 일일 데이터 (날짜 단위로 저장)
localStorage.setItem('studentDailyData_current', JSON.stringify({
  "1-1-1": {  // studentId
    "2026-02-05": {
      prayerRequests: ["시험 잘 보기", "건강"],
      notes: "최근 감기 있었음",
      attendance: true
    },
    "2026-02-06": {
      prayerRequests: [],
      notes: "",
      attendance: false
    }
  },
  "1-1-2": { ... }
}))

// 이전 날짜 백업
localStorage.setItem('studentDailyData_backup_2026-02-05', JSON.stringify(data))
```

### 4-6. 자동 저장 규칙
- [ ] 모든 입력 (기도제목, 특이사항, 출석)이 저장될 때마다 **즉시 LocalStorage 갱신**
- [ ] 사용자가 UI에서 바로 확인 가능 (메모리 → 화면 반영)
- [ ] 동시성 문제 처리: 날짜별로 독립적으로 관리하여 충돌 방지

---

## ✅ 요구사항 5: 디자인 및 UI/UX

### 5-1. 디자인 철학
- [ ] 인스타그램 스타일의 **깔끔하고 미니멀한** 디자인
- [ ] 불필요한 요소 제거
- [ ] 여백을 충분히 확보
- [ ] 직관적이고 사용하기 쉬운 인터페이스

### 5-2. 색상 팔레트
- [ ] **Primary Color: 푸른색**
  - 주요 버튼, 선택 상태, 강조 요소
  - 예: `#0095F6` (Instagram 블루)
- [ ] **Secondary Colors:**
  - 흰색 (`#FFFFFF`) - 배경
  - 밝은 회색 (`#FAFAFA`) - 카드 배경
  - 중간 회색 (`#E4E4E7`) - 경계선/구분선
  - 어두운 회색 (`#71717A`) - 보조 텍스트
  - 검정색 (`#18181B`) - 주 텍스트

### 5-3. 타이포그래피
- [ ] **폰트**: 시스템 폰트 또는 'Inter', 'Segoe UI'
- [ ] **텍스트 계층 구조:**
  - 제목: 28px - 800 Weight (Bold)
  - 부제목: 20px - 600 Weight (Semibold)
  - 본문: 14-16px - 400 Weight (Regular)
  - 소제목: 12px - 500 Weight (Medium)

### 5-4. 컴포넌트 디자인
- [ ] **버튼**: 둥근 모서리 (border-radius: 8px), 그림자 없음
- [ ] **입력 필드**: 얇은 경계선, 포커스 시 푸른색 강조
- [ ] **카드**: 미세한 그림자 또는 경계선만 사용
- [ ] **모달**: 투명한 어두운 오버레이 + 중앙 배치
- [ ] **체크박스/라디오**: 푸른색 활성화

### 5-5. 레이아웃
- [ ] **간격**: 일관된 8px 그리드 시스템
- [ ] **최대 너비**: 일반적으로 1200px
- [ ] **반응형**: 모바일 친화적 (스택 레이아웃)
- [ ] **안전 영역**: 충분한 패딩

### 5-6. 상호작용 (Interactions)
- [ ] **호버 효과**: 버튼/카드 호버 시 미세한 투명도 변화
- [ ] **전환 애니메이션**: 부드러운 전환 (0.2-0.3초)
- [ ] **로딩**: 로딩 스피너 또는 스켈레톤 화면
- [ ] **피드백**: 저장 성공/실패 토스트 메시지

### 5-7. 다크 모드 (선택사항)
- [ ] 다크 모드 지원 고려 (향후)

---

## ✅ 요구사항 6: 날짜 형식 변경

- [ ] **날짜 표시 형식**: 학생 목록 화면에서 날짜를 `YYYY년 MM월 N주차` 형식으로 표시합니다.
- [ ] **데이터 저장 형식**: `dailyData`의 키 값으로 `YYYY년 MM월 N주차` (예: `2023년 10월 4주차`) 형식을 사용합니다.
- [ ] **주차 계산**: 해당 월의 첫째 날을 기준으로 몇 번째 주인지 계산합니다. (예: 1일~7일 = 1주차, 8일~14일 = 2주차)

---

## 📝 요구사항 추가 예정

> 다음 요구사항을 대기 중입니다...

---

## 📊 초기 데이터 구조

### schoolData (학년/반/학생 정보)
```javascript
{
  1: [
    {
      id: "1-1",
      name: "1-1",
      teacher: "담임선생님 이름",
      students: [
        { id: 1, name: "학생 이름" },
        ...
      ]
    },
    ...
  ],
  2: [...],
  3: [...]
}
```

### studentNotes (기도제목/특이사항/출석)
```javascript
{
  "1-1-1-prayer": "학생 1의 기도제목",
  "1-1-1-notes": "학생 1의 특이사항",
  "1-1-1-attendance": true,  // 출석 여부
  "1-1-2-prayer": "학생 2의 기도제목",
  "1-1-2-notes": "학생 2의 특이사항",
  "1-1-2-attendance": false, // 출석 여부
  ...
}
```
- 키 형식: `{학년}-{반}-{학생ID}-{타입(prayer/notes/attendance)}`

---

## 🎯 기술 스택
- React 18
- Vite
- CSS 3

---

## 📌 작업 진행 상황
- [ ] 요구사항 1 구현
- [ ] 요구사항 2 구현
- [ ] 요구사항 3 구현
- [ ] 요구사항 4 구현
- [ ] 요구사항 5 구현
- [ ] 요구사항 6 구현
